"use strict";(self.webpackChunkcompanyos_backend=self.webpackChunkcompanyos_backend||[]).push([[295],{8295:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var l=t(5458),a=t(4980),s=(t(2675),t(9463),t(2008),t(8980),t(1629),t(7945),t(4185),t(3851),t(1278),t(9432),t(3949),t(3500),t(2062),t(4114),t(2010),t(6099),t(8992),t(4520),t(1454),t(1425));function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,l)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach(function(n){(0,a.A)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var r={class:"permissions-page"},u={class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},c={class:"btn-toolbar mb-2 mb-md-0"},d={class:"table-responsive"},m={class:"table table-striped table-sm"},p=["onClick"],b=["onClick"],k={class:"modal-dialog"},v={class:"modal-content"},f={class:"modal-header"},y={class:"modal-title"},L={class:"modal-body"},g={class:"mb-3"},h={class:"mb-3"},w={class:"mb-3"},B={class:"mb-3"},O={key:0,class:"modal-backdrop fade show"};const C={__name:"Permissions",setup:function(e){var n=(0,s.KR)([{id:1,name:"Benutzer anzeigen",key:"users.view",description:"Benutzerliste anzeigen",module:"users"},{id:2,name:"Benutzer erstellen",key:"users.create",description:"Neue Benutzer erstellen",module:"users"},{id:3,name:"Benutzer bearbeiten",key:"users.edit",description:"Benutzerdaten bearbeiten",module:"users"},{id:4,name:"Benutzer löschen",key:"users.delete",description:"Benutzer löschen",module:"users"},{id:5,name:"Rollen verwalten",key:"roles.manage",description:"Rollen erstellen und bearbeiten",module:"roles"},{id:6,name:"Berechtigungen verwalten",key:"permissions.manage",description:"Berechtigungen verwalten",module:"permissions"},{id:7,name:"Plugins verwalten",key:"plugins.manage",description:"Plugins installieren und konfigurieren",module:"plugins"},{id:8,name:"Systemeinstellungen",key:"settings.system",description:"Systemeinstellungen ändern",module:"settings"}]),t=(0,s.KR)(!1),a=(0,s.KR)(null),o=(0,s.Kh)({name:"",key:"",description:"",module:""}),C=function(){t.value=!1,a.value=null,o.name="",o.key="",o.description="",o.module=""},j=function(){if(a.value){var e=n.value.findIndex(function(e){return e.id===a.value.id});n.value[e]=i(i({},a.value),o)}else{var t=i({id:Math.max.apply(Math,(0,l.A)(n.value.map(function(e){return e.id})))+1},o);n.value.push(t)}C()};return function(e,l){return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",u,[l[6]||(l[6]=(0,s.Lk)("h1",{class:"h2"},"Berechtigungsverwaltung",-1)),(0,s.Lk)("div",c,[(0,s.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:l[0]||(l[0]=function(e){return t.value=!0})},l[5]||(l[5]=[(0,s.Lk)("i",{class:"cil-plus"},null,-1),(0,s.eW)(" Neue Berechtigung ")]))])]),(0,s.Lk)("div",d,[(0,s.Lk)("table",m,[l[9]||(l[9]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Schlüssel"),(0,s.Lk)("th",null,"Beschreibung"),(0,s.Lk)("th",null,"Modul"),(0,s.Lk)("th",null,"Aktionen")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,function(e){return(0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,s.v_)(e.id),1),(0,s.Lk)("td",null,(0,s.v_)(e.name),1),(0,s.Lk)("td",null,[(0,s.Lk)("code",null,(0,s.v_)(e.key),1)]),(0,s.Lk)("td",null,(0,s.v_)(e.description),1),(0,s.Lk)("td",null,(0,s.v_)(e.module),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-primary me-1",onClick:function(n){return function(e){a.value=e,o.name=e.name,o.key=e.key,o.description=e.description,o.module=e.module,t.value=!0}(e)}},l[7]||(l[7]=[(0,s.Lk)("i",{class:"cil-pencil"},null,-1)]),8,p),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:function(t){return l=e.id,void(confirm("Sind Sie sicher, dass Sie diese Berechtigung löschen möchten?")&&(n.value=n.value.filter(function(e){return e.id!==l})));var l}},l[8]||(l[8]=[(0,s.Lk)("i",{class:"cil-trash"},null,-1)]),8,b)])])}),128))])])]),(0,s.Q3)(" Create/Edit Modal "),(0,s.Lk)("div",{class:(0,s.C4)(["modal fade",{show:t.value}]),style:(0,s.Tr)({display:t.value?"block":"none"}),tabindex:"-1"},[(0,s.Lk)("div",k,[(0,s.Lk)("div",v,[(0,s.Lk)("div",f,[(0,s.Lk)("h5",y,(0,s.v_)(a.value?"Berechtigung bearbeiten":"Neue Berechtigung erstellen"),1),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:C})]),(0,s.Lk)("div",L,[(0,s.Lk)("form",{onSubmit:(0,s.D$)(j,["prevent"])},[(0,s.Lk)("div",g,[l[10]||(l[10]=(0,s.Lk)("label",{class:"form-label"},"Name",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=function(e){return o.name=e}),required:""},null,512),[[s.Jo,o.name]])]),(0,s.Lk)("div",h,[l[11]||(l[11]=(0,s.Lk)("label",{class:"form-label"},"Schlüssel",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=function(e){return o.key=e}),required:""},null,512),[[s.Jo,o.key]])]),(0,s.Lk)("div",w,[l[12]||(l[12]=(0,s.Lk)("label",{class:"form-label"},"Beschreibung",-1)),(0,s.bo)((0,s.Lk)("textarea",{class:"form-control","onUpdate:modelValue":l[3]||(l[3]=function(e){return o.description=e}),rows:"3"},null,512),[[s.Jo,o.description]])]),(0,s.Lk)("div",B,[l[14]||(l[14]=(0,s.Lk)("label",{class:"form-label"},"Modul",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":l[4]||(l[4]=function(e){return o.module=e}),required:""},l[13]||(l[13]=[(0,s.Fv)('<option value="" data-v-fa6404a4>Modul auswählen</option><option value="users" data-v-fa6404a4>Benutzer</option><option value="roles" data-v-fa6404a4>Rollen</option><option value="permissions" data-v-fa6404a4>Berechtigungen</option><option value="plugins" data-v-fa6404a4>Plugins</option><option value="settings" data-v-fa6404a4>Einstellungen</option><option value="system" data-v-fa6404a4>System</option>',7)]),512),[[s.u1,o.module]])])],32)]),(0,s.Lk)("div",{class:"modal-footer"},[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:C},"Abbrechen"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:j},"Speichern")])])])],6),t.value?((0,s.uX)(),(0,s.CE)("div",O)):(0,s.Q3)("v-if",!0)])}}};const j=(0,t(6262).A)(C,[["__scopeId","data-v-fa6404a4"]])}}]);