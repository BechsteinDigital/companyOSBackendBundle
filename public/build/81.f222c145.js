"use strict";(self.webpackChunkcompanyos_backend=self.webpackChunkcompanyos_backend||[]).push([[81],{9081:(e,n,t)=>{t.r(n),t.d(n,{default:()=>_});var r=t(467),u=t(4756),a=t.n(u),l=(t(3288),t(6099),t(3362),t(6031),t(1425)),i=t(7383),o={class:"mb-3"},s={class:"mt-1"},c={class:"mb-3"},d={class:"mt-1"},f={class:"mb-3"},m={class:"mt-1"},k={class:"mb-3"},v={class:"mt-1"};const _={__name:"Profile",setup:function(e){var n=(0,i.n)(),t=(0,l.KR)(!1),u=(0,l.KR)({firstName:"",lastName:"",email:""});(0,l.sV)(function(){n.user&&(u.value={firstName:n.user.firstName||"",lastName:n.user.lastName||"",email:n.user.email||""})});var _=function(){var e=(0,r.A)(a().mark(function e(){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.value=!0,e.prev=1,e.next=2,new Promise(function(e){return setTimeout(e,1e3)});case 2:n.user&&(n.user.firstName=u.value.firstName,n.user.lastName=u.value.lastName),alert("Profil erfolgreich aktualisiert!"),e.next=4;break;case 3:e.prev=3,r=e.catch(1),alert("Fehler beim Aktualisieren des Profils: "+r.message);case 4:return e.prev=4,t.value=!1,e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),b=function(e){return e?new Date(e).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unbekannt"};return function(e,r){var a=(0,l.g2)("CBreadcrumbItem"),i=(0,l.g2)("CBreadcrumb"),g=(0,l.g2)("CCardHeader"),p=(0,l.g2)("CFormInput"),h=(0,l.g2)("CCol"),F=(0,l.g2)("CRow"),L=(0,l.g2)("CSpinner"),C=(0,l.g2)("CButton"),y=(0,l.g2)("CForm"),N=(0,l.g2)("CCardBody"),R=(0,l.g2)("CCard"),W=(0,l.g2)("CBadge");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(i,{class:"my-3"},{default:(0,l.k6)(function(){return[(0,l.bF)(a,{href:"/dashboard"},{default:(0,l.k6)(function(){return r[3]||(r[3]=[(0,l.eW)("Dashboard")])}),_:1,__:[3]}),(0,l.bF)(a,{active:""},{default:(0,l.k6)(function(){return r[4]||(r[4]=[(0,l.eW)("Profil")])}),_:1,__:[4]})]}),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(h,{md:"8"},{default:(0,l.k6)(function(){return[(0,l.bF)(R,null,{default:(0,l.k6)(function(){return[(0,l.bF)(g,null,{default:(0,l.k6)(function(){return r[5]||(r[5]=[(0,l.Lk)("h4",{class:"card-title mb-0"},"Profil bearbeiten",-1)])}),_:1,__:[5]}),(0,l.bF)(N,null,{default:(0,l.k6)(function(){return[(0,l.bF)(y,{onSubmit:(0,l.D$)(_,["prevent"])},{default:(0,l.k6)(function(){return[(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(h,{md:"6"},{default:(0,l.k6)(function(){return[(0,l.bF)(p,{modelValue:u.value.firstName,"onUpdate:modelValue":r[0]||(r[0]=function(e){return u.value.firstName=e}),label:"Vorname",placeholder:"Vorname eingeben",required:""},null,8,["modelValue"])]}),_:1}),(0,l.bF)(h,{md:"6"},{default:(0,l.k6)(function(){return[(0,l.bF)(p,{modelValue:u.value.lastName,"onUpdate:modelValue":r[1]||(r[1]=function(e){return u.value.lastName=e}),label:"Nachname",placeholder:"Nachname eingeben",required:""},null,8,["modelValue"])]}),_:1})]}),_:1}),(0,l.bF)(p,{modelValue:u.value.email,"onUpdate:modelValue":r[2]||(r[2]=function(e){return u.value.email=e}),label:"E-Mail",type:"email",placeholder:"E-Mail eingeben",required:"",readonly:""},null,8,["modelValue"]),(0,l.bF)(C,{type:"submit",color:"primary",disabled:t.value},{default:(0,l.k6)(function(){return[t.value?((0,l.uX)(),(0,l.Wv)(L,{key:0,size:"sm",class:"me-2"})):(0,l.Q3)("v-if",!0),(0,l.eW)(" "+(0,l.v_)(t.value?"Speichern...":"Profil speichern"),1)]}),_:1},8,["disabled"])]}),_:1})]}),_:1})]}),_:1})]}),_:1}),(0,l.bF)(h,{md:"4"},{default:(0,l.k6)(function(){return[(0,l.bF)(R,null,{default:(0,l.k6)(function(){return[(0,l.bF)(g,null,{default:(0,l.k6)(function(){return r[6]||(r[6]=[(0,l.Lk)("h5",{class:"card-title mb-0"},"Account-Informationen",-1)])}),_:1,__:[6]}),(0,l.bF)(N,null,{default:(0,l.k6)(function(){var e,t,u;return[(0,l.Lk)("div",o,[r[11]||(r[11]=(0,l.Lk)("strong",null,"Rolle:",-1)),(0,l.Lk)("div",s,[(0,l.R1)(n).hasRole("ROLE_ADMIN")?((0,l.uX)(),(0,l.Wv)(W,{key:0,color:"danger"},{default:(0,l.k6)(function(){return r[7]||(r[7]=[(0,l.eW)("Administrator")])}),_:1,__:[7]})):(0,l.R1)(n).hasRole("ROLE_EMPLOYEE")?((0,l.uX)(),(0,l.Wv)(W,{key:1,color:"warning"},{default:(0,l.k6)(function(){return r[8]||(r[8]=[(0,l.eW)("Mitarbeiter")])}),_:1,__:[8]})):(0,l.R1)(n).hasRole("ROLE_CUSTOMER")?((0,l.uX)(),(0,l.Wv)(W,{key:2,color:"info"},{default:(0,l.k6)(function(){return r[9]||(r[9]=[(0,l.eW)("Kunde")])}),_:1,__:[9]})):((0,l.uX)(),(0,l.Wv)(W,{key:3,color:"secondary"},{default:(0,l.k6)(function(){return r[10]||(r[10]=[(0,l.eW)("Unbekannt")])}),_:1,__:[10]}))])]),(0,l.Lk)("div",c,[r[14]||(r[14]=(0,l.Lk)("strong",null,"Status:",-1)),(0,l.Lk)("div",d,[null!==(e=(0,l.R1)(n).user)&&void 0!==e&&e.isActive?((0,l.uX)(),(0,l.Wv)(W,{key:0,color:"success"},{default:(0,l.k6)(function(){return r[12]||(r[12]=[(0,l.eW)("Aktiv")])}),_:1,__:[12]})):((0,l.uX)(),(0,l.Wv)(W,{key:1,color:"danger"},{default:(0,l.k6)(function(){return r[13]||(r[13]=[(0,l.eW)("Inaktiv")])}),_:1,__:[13]}))])]),(0,l.Lk)("div",f,[r[15]||(r[15]=(0,l.Lk)("strong",null,"Registriert seit:",-1)),(0,l.Lk)("div",m,(0,l.v_)(b(null===(t=(0,l.R1)(n).user)||void 0===t?void 0:t.createdAt)),1)]),(0,l.Lk)("div",k,[r[16]||(r[16]=(0,l.Lk)("strong",null,"Letzte Anmeldung:",-1)),(0,l.Lk)("div",v,(0,l.v_)(b(null===(u=(0,l.R1)(n).user)||void 0===u?void 0:u.lastLoginAt)||"Noch nie"),1)])]}),_:1})]}),_:1})]}),_:1})]}),_:1})])}}}}}]);