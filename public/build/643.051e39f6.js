"use strict";(self.webpackChunkcompanyos_backend=self.webpackChunkcompanyos_backend||[]).push([[643],{1643:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var l=n(4980),s=n(5458),r=(n(2675),n(9463),n(2008),n(113),n(8980),n(2062),n(4114),n(1629),n(2010),n(7945),n(4185),n(3851),n(1278),n(9432),n(6099),n(8992),n(4520),n(3949),n(3500),n(2577),n(1454),n(1425));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,l.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u={class:"webhooks-page"},c={class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},o={class:"btn-toolbar mb-2 mb-md-0"},d={class:"row"},k={class:"col-md-8"},b={class:"table-responsive"},v={class:"table table-striped table-sm"},m={class:"text-muted"},p={class:"text-truncate d-inline-block",style:{"max-width":"200px"}},f=["onClick"],L=["onClick"],y=["onClick"],h=["onClick"],g=["onClick"],w={class:"col-md-4"},C={class:"card"},O={class:"card-body"},x={class:"d-flex justify-content-between mb-2"},E={class:"badge bg-success"},_={class:"d-flex justify-content-between mb-2"},B={class:"badge bg-secondary"},S={class:"d-flex justify-content-between mb-2"},W={class:"badge bg-danger"},j={class:"d-flex justify-content-between"},F={class:"badge bg-primary"},A={class:"card mt-4"},P={class:"card-body"},U={class:"text-muted"},X={class:"modal-dialog modal-lg"},K={class:"modal-content"},z={class:"modal-header"},I={class:"modal-title"},V={class:"modal-body"},R={class:"mb-3"},D={class:"mb-3"},M={class:"mb-3"},N={class:"mb-3"},J={class:"row"},Q={class:"form-check"},H=["value","id"],q=["for"],G={class:"mb-3"},T={class:"mb-3"},$={class:"form-check"},Y={key:0,class:"modal-backdrop fade show"};const Z={__name:"Webhooks",setup:function(e){var t=(0,r.KR)([{id:1,name:"User Registration",description:"Benachrichtigung bei neuer Benutzerregistrierung",url:"https://api.example.com/webhooks/user-registration",events:["user.created"],status:"active",lastCall:"2024-01-15 14:30:00"},{id:2,name:"Order Processing",description:"Bestellungen an ERP-System weiterleiten",url:"https://erp.example.com/webhooks/orders",events:["order.created","order.updated"],status:"active",lastCall:"2024-01-15 13:45:00"},{id:3,name:"System Alerts",description:"Systemwarnungen an Monitoring-Service",url:"https://monitoring.example.com/alerts",events:["system.error","system.warning"],status:"inactive",lastCall:null}]),n=[{key:"user.created",name:"Benutzer erstellt",description:"Wenn ein neuer Benutzer registriert wird"},{key:"user.updated",name:"Benutzer aktualisiert",description:"Wenn Benutzerdaten geändert werden"},{key:"user.deleted",name:"Benutzer gelöscht",description:"Wenn ein Benutzer gelöscht wird"},{key:"order.created",name:"Bestellung erstellt",description:"Wenn eine neue Bestellung erstellt wird"},{key:"order.updated",name:"Bestellung aktualisiert",description:"Wenn eine Bestellung geändert wird"},{key:"order.cancelled",name:"Bestellung storniert",description:"Wenn eine Bestellung storniert wird"},{key:"system.error",name:"Systemfehler",description:"Bei kritischen Systemfehlern"},{key:"system.warning",name:"Systemwarnung",description:"Bei Systemwarnungen"}],l=(0,r.KR)(!1),a=(0,r.KR)(null),Z=(0,r.Kh)({name:"",description:"",url:"",events:[],secret:"",retryOnFailure:!0}),ee=(0,r.EW)(function(){return t.value.filter(function(e){return"active"===e.status}).length}),te=(0,r.EW)(function(){return t.value.filter(function(e){return"inactive"===e.status}).length}),ne=(0,r.EW)(function(){return t.value.filter(function(e){return"error"===e.status}).length}),le=function(e){switch(e){case"active":return"badge bg-success";case"inactive":default:return"badge bg-secondary";case"error":return"badge bg-danger"}},se=function(e){switch(e){case"active":return"Aktiv";case"inactive":return"Inaktiv";case"error":return"Fehler";default:return"Unbekannt"}},re=function(){l.value=!1,a.value=null,Z.name="",Z.description="",Z.url="",Z.events=[],Z.secret="",Z.retryOnFailure=!0},ae=function(){if(a.value){var e=t.value.findIndex(function(e){return e.id===a.value.id});t.value[e]=i(i({},a.value),Z)}else{var n=i(i({id:Math.max.apply(Math,(0,s.A)(t.value.map(function(e){return e.id})))+1},Z),{},{status:"inactive",lastCall:null});t.value.push(n)}re()};return function(e,i){return(0,r.uX)(),(0,r.CE)("div",u,[(0,r.Lk)("div",c,[i[8]||(i[8]=(0,r.Lk)("h1",{class:"h2"},"Webhook-Verwaltung",-1)),(0,r.Lk)("div",o,[(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:i[0]||(i[0]=function(e){return l.value=!0})},i[7]||(i[7]=[(0,r.Lk)("i",{class:"cil-plus"},null,-1),(0,r.eW)(" Neuer Webhook ")]))])]),(0,r.Lk)("div",d,[(0,r.Lk)("div",k,[(0,r.Lk)("div",b,[(0,r.Lk)("table",v,[i[15]||(i[15]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Name"),(0,r.Lk)("th",null,"URL"),(0,r.Lk)("th",null,"Events"),(0,r.Lk)("th",null,"Status"),(0,r.Lk)("th",null,"Letzter Aufruf"),(0,r.Lk)("th",null,"Aktionen")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.value,function(e){return(0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,(0,r.v_)(e.name),1),i[9]||(i[9]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("small",m,(0,r.v_)(e.description),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("code",p,(0,r.v_)(e.url),1)]),(0,r.Lk)("td",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.events,function(e){return(0,r.uX)(),(0,r.CE)("span",{key:e,class:"badge bg-info me-1"},(0,r.v_)(e),1)}),128))]),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,r.C4)(le(e.status))},(0,r.v_)(se(e.status)),3)]),(0,r.Lk)("td",null,[(0,r.Lk)("small",null,(0,r.v_)(e.lastCall||"Nie"),1)]),(0,r.Lk)("td",null,["inactive"===e.status?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-sm btn-outline-success me-1",onClick:function(n){return function(e){var n=t.value.find(function(t){return t.id===e});n&&(n.status="active")}(e.id)}},i[10]||(i[10]=[(0,r.Lk)("i",{class:"cil-check"},null,-1)]),8,f)):(0,r.Q3)("v-if",!0),"active"===e.status?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"btn btn-sm btn-outline-warning me-1",onClick:function(n){return function(e){var n=t.value.find(function(t){return t.id===e});n&&(n.status="inactive")}(e.id)}},i[11]||(i[11]=[(0,r.Lk)("i",{class:"cil-ban"},null,-1)]),8,L)):(0,r.Q3)("v-if",!0),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary me-1",onClick:function(t){return function(e){a.value=e,Z.name=e.name,Z.description=e.description,Z.url=e.url,Z.events=(0,s.A)(e.events),Z.secret=e.secret||"",Z.retryOnFailure=!1!==e.retryOnFailure,l.value=!0}(e)}},i[12]||(i[12]=[(0,r.Lk)("i",{class:"cil-pencil"},null,-1)]),8,y),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-info me-1",onClick:function(t){return e.id,void alert("Webhook wird getestet...")}},i[13]||(i[13]=[(0,r.Lk)("i",{class:"cil-send"},null,-1)]),8,h),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:function(n){return l=e.id,void(confirm("Sind Sie sicher, dass Sie diesen Webhook löschen möchten?")&&(t.value=t.value.filter(function(e){return e.id!==l})));var l}},i[14]||(i[14]=[(0,r.Lk)("i",{class:"cil-trash"},null,-1)]),8,g)])])}),128))])])])]),(0,r.Lk)("div",w,[(0,r.Lk)("div",C,[i[21]||(i[21]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"card-title mb-0"},"Webhook-Statistiken")],-1)),(0,r.Lk)("div",O,[(0,r.Lk)("div",x,[i[16]||(i[16]=(0,r.Lk)("span",null,"Aktiv:",-1)),(0,r.Lk)("span",E,(0,r.v_)(ee.value),1)]),(0,r.Lk)("div",_,[i[17]||(i[17]=(0,r.Lk)("span",null,"Inaktiv:",-1)),(0,r.Lk)("span",B,(0,r.v_)(te.value),1)]),(0,r.Lk)("div",S,[i[18]||(i[18]=(0,r.Lk)("span",null,"Fehlerhaft:",-1)),(0,r.Lk)("span",W,(0,r.v_)(ne.value),1)]),i[20]||(i[20]=(0,r.Lk)("hr",null,null,-1)),(0,r.Lk)("div",j,[i[19]||(i[19]=(0,r.Lk)("span",null,"Gesamt:",-1)),(0,r.Lk)("span",F,(0,r.v_)(t.value.length),1)])])]),(0,r.Lk)("div",A,[i[23]||(i[23]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"card-title mb-0"},"Verfügbare Events")],-1)),(0,r.Lk)("div",P,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(n,function(e){return(0,r.Lk)("div",{key:e.key,class:"mb-2"},[(0,r.Lk)("strong",null,(0,r.v_)(e.name),1),i[22]||(i[22]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("small",U,(0,r.v_)(e.description),1)])}),64))])])])]),(0,r.Q3)(" Create/Edit Modal "),(0,r.Lk)("div",{class:(0,r.C4)(["modal fade",{show:l.value}]),style:(0,r.Tr)({display:l.value?"block":"none"}),tabindex:"-1"},[(0,r.Lk)("div",X,[(0,r.Lk)("div",K,[(0,r.Lk)("div",z,[(0,r.Lk)("h5",I,(0,r.v_)(a.value?"Webhook bearbeiten":"Neuer Webhook"),1),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:re})]),(0,r.Lk)("div",V,[(0,r.Lk)("form",{onSubmit:(0,r.D$)(ae,["prevent"])},[(0,r.Lk)("div",R,[i[24]||(i[24]=(0,r.Lk)("label",{class:"form-label"},"Name",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":i[1]||(i[1]=function(e){return Z.name=e}),required:""},null,512),[[r.Jo,Z.name]])]),(0,r.Lk)("div",D,[i[25]||(i[25]=(0,r.Lk)("label",{class:"form-label"},"Beschreibung",-1)),(0,r.bo)((0,r.Lk)("textarea",{class:"form-control","onUpdate:modelValue":i[2]||(i[2]=function(e){return Z.description=e}),rows:"2"},null,512),[[r.Jo,Z.description]])]),(0,r.Lk)("div",M,[i[26]||(i[26]=(0,r.Lk)("label",{class:"form-label"},"URL",-1)),(0,r.bo)((0,r.Lk)("input",{type:"url",class:"form-control","onUpdate:modelValue":i[3]||(i[3]=function(e){return Z.url=e}),required:""},null,512),[[r.Jo,Z.url]])]),(0,r.Lk)("div",N,[i[27]||(i[27]=(0,r.Lk)("label",{class:"form-label"},"Events",-1)),(0,r.Lk)("div",J,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(n,function(e){return(0,r.Lk)("div",{key:e.key,class:"col-md-6"},[(0,r.Lk)("div",Q,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.key,"onUpdate:modelValue":i[4]||(i[4]=function(e){return Z.events=e}),id:"event-"+e.key},null,8,H),[[r.lH,Z.events]]),(0,r.Lk)("label",{class:"form-check-label",for:"event-"+e.key},(0,r.v_)(e.name),9,q)])])}),64))])]),(0,r.Lk)("div",G,[i[28]||(i[28]=(0,r.Lk)("label",{class:"form-label"},"Secret Key (optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":i[5]||(i[5]=function(e){return Z.secret=e}),placeholder:"Für HMAC-Signatur"},null,512),[[r.Jo,Z.secret]])]),(0,r.Lk)("div",T,[(0,r.Lk)("div",$,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":i[6]||(i[6]=function(e){return Z.retryOnFailure=e})},null,512),[[r.lH,Z.retryOnFailure]]),i[29]||(i[29]=(0,r.Lk)("label",{class:"form-check-label"}," Bei Fehlern wiederholen ",-1))])])],32)]),(0,r.Lk)("div",{class:"modal-footer"},[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:re},"Abbrechen"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:ae},"Speichern")])])])],6),l.value?((0,r.uX)(),(0,r.CE)("div",Y)):(0,r.Q3)("v-if",!0)])}}};const ee=(0,n(6262).A)(Z,[["__scopeId","data-v-63bba5f3"]])}}]);