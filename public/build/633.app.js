"use strict";(self.webpackChunkcompanyos_backend=self.webpackChunkcompanyos_backend||[]).push([[633],{2020:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(1601),l=n.n(r),a=n(6314),s=n.n(a)()(l());s.push([e.id,"\n.webhooks-page[data-v-63bba5f3] {\n  padding: 20px;\n}\n",""]);const i=s},4633:(e,t,n)=>{n.r(t),n.d(t,{default:()=>fe});var r=n(1425);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c={class:"webhooks-page"},d={class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},b={class:"btn-toolbar mb-2 mb-md-0"},k={class:"row"},m={class:"col-md-8"},v={class:"table-responsive"},f={class:"table table-striped table-sm"},p={class:"text-muted"},y={class:"text-truncate d-inline-block",style:{"max-width":"200px"}},L=["onClick"],h=["onClick"],g=["onClick"],w=["onClick"],C=["onClick"],S={class:"col-md-4"},O={class:"card"},x={class:"card-body"},E={class:"d-flex justify-content-between mb-2"},A={class:"badge bg-success"},j={class:"d-flex justify-content-between mb-2"},_={class:"badge bg-secondary"},B={class:"d-flex justify-content-between mb-2"},W={class:"badge bg-danger"},F={class:"d-flex justify-content-between"},P={class:"badge bg-primary"},I={class:"card mt-4"},U={class:"card-body"},X={class:"text-muted"},K={class:"modal-dialog modal-lg"},z={class:"modal-content"},V={class:"modal-header"},R={class:"modal-title"},M={class:"modal-body"},D={class:"mb-3"},N={class:"mb-3"},T={class:"mb-3"},J={class:"mb-3"},Q={class:"row"},H={class:"form-check"},q=["value","id"],$=["for"],G={class:"mb-3"},Y={class:"mb-3"},Z={class:"form-check"},ee={key:0,class:"modal-backdrop fade show"};const te={__name:"Webhooks",setup:function(e){var t=(0,r.KR)([{id:1,name:"User Registration",description:"Benachrichtigung bei neuer Benutzerregistrierung",url:"https://api.example.com/webhooks/user-registration",events:["user.created"],status:"active",lastCall:"2024-01-15 14:30:00"},{id:2,name:"Order Processing",description:"Bestellungen an ERP-System weiterleiten",url:"https://erp.example.com/webhooks/orders",events:["order.created","order.updated"],status:"active",lastCall:"2024-01-15 13:45:00"},{id:3,name:"System Alerts",description:"Systemwarnungen an Monitoring-Service",url:"https://monitoring.example.com/alerts",events:["system.error","system.warning"],status:"inactive",lastCall:null}]),n=[{key:"user.created",name:"Benutzer erstellt",description:"Wenn ein neuer Benutzer registriert wird"},{key:"user.updated",name:"Benutzer aktualisiert",description:"Wenn Benutzerdaten geändert werden"},{key:"user.deleted",name:"Benutzer gelöscht",description:"Wenn ein Benutzer gelöscht wird"},{key:"order.created",name:"Bestellung erstellt",description:"Wenn eine neue Bestellung erstellt wird"},{key:"order.updated",name:"Bestellung aktualisiert",description:"Wenn eine Bestellung geändert wird"},{key:"order.cancelled",name:"Bestellung storniert",description:"Wenn eine Bestellung storniert wird"},{key:"system.error",name:"Systemfehler",description:"Bei kritischen Systemfehlern"},{key:"system.warning",name:"Systemwarnung",description:"Bei Systemwarnungen"}],l=(0,r.KR)(!1),a=(0,r.KR)(null),i=(0,r.Kh)({name:"",description:"",url:"",events:[],secret:"",retryOnFailure:!0}),u=(0,r.EW)(function(){return t.value.filter(function(e){return"active"===e.status}).length}),te=(0,r.EW)(function(){return t.value.filter(function(e){return"inactive"===e.status}).length}),ne=(0,r.EW)(function(){return t.value.filter(function(e){return"error"===e.status}).length}),re=function(e){switch(e){case"active":return"badge bg-success";case"inactive":default:return"badge bg-secondary";case"error":return"badge bg-danger"}},le=function(e){switch(e){case"active":return"Aktiv";case"inactive":return"Inaktiv";case"error":return"Fehler";default:return"Unbekannt"}},ae=function(){l.value=!1,a.value=null,i.name="",i.description="",i.url="",i.events=[],i.secret="",i.retryOnFailure=!0},se=function(){if(a.value){var e=t.value.findIndex(function(e){return e.id===a.value.id});t.value[e]=s(s({},a.value),i)}else{var n=s(s({id:Math.max.apply(Math,o(t.value.map(function(e){return e.id})))+1},i),{},{status:"inactive",lastCall:null});t.value.push(n)}ae()};return function(e,s){return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",d,[s[8]||(s[8]=(0,r.Lk)("h1",{class:"h2"},"Webhook-Verwaltung",-1)),(0,r.Lk)("div",b,[(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:s[0]||(s[0]=function(e){return l.value=!0})},s[7]||(s[7]=[(0,r.Lk)("i",{class:"cil-plus"},null,-1),(0,r.eW)(" Neuer Webhook ")]))])]),(0,r.Lk)("div",k,[(0,r.Lk)("div",m,[(0,r.Lk)("div",v,[(0,r.Lk)("table",f,[s[15]||(s[15]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Name"),(0,r.Lk)("th",null,"URL"),(0,r.Lk)("th",null,"Events"),(0,r.Lk)("th",null,"Status"),(0,r.Lk)("th",null,"Letzter Aufruf"),(0,r.Lk)("th",null,"Aktionen")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.value,function(e){return(0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,(0,r.v_)(e.name),1),s[9]||(s[9]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("small",p,(0,r.v_)(e.description),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("code",y,(0,r.v_)(e.url),1)]),(0,r.Lk)("td",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.events,function(e){return(0,r.uX)(),(0,r.CE)("span",{key:e,class:"badge bg-info me-1"},(0,r.v_)(e),1)}),128))]),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,r.C4)(re(e.status))},(0,r.v_)(le(e.status)),3)]),(0,r.Lk)("td",null,[(0,r.Lk)("small",null,(0,r.v_)(e.lastCall||"Nie"),1)]),(0,r.Lk)("td",null,["inactive"===e.status?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-sm btn-outline-success me-1",onClick:function(n){return function(e){var n=t.value.find(function(t){return t.id===e});n&&(n.status="active")}(e.id)}},s[10]||(s[10]=[(0,r.Lk)("i",{class:"cil-check"},null,-1)]),8,L)):(0,r.Q3)("v-if",!0),"active"===e.status?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"btn btn-sm btn-outline-warning me-1",onClick:function(n){return function(e){var n=t.value.find(function(t){return t.id===e});n&&(n.status="inactive")}(e.id)}},s[11]||(s[11]=[(0,r.Lk)("i",{class:"cil-ban"},null,-1)]),8,h)):(0,r.Q3)("v-if",!0),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary me-1",onClick:function(t){return function(e){a.value=e,i.name=e.name,i.description=e.description,i.url=e.url,i.events=o(e.events),i.secret=e.secret||"",i.retryOnFailure=!1!==e.retryOnFailure,l.value=!0}(e)}},s[12]||(s[12]=[(0,r.Lk)("i",{class:"cil-pencil"},null,-1)]),8,g),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-info me-1",onClick:function(t){return e.id,void alert("Webhook wird getestet...")}},s[13]||(s[13]=[(0,r.Lk)("i",{class:"cil-send"},null,-1)]),8,w),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:function(n){return r=e.id,void(confirm("Sind Sie sicher, dass Sie diesen Webhook löschen möchten?")&&(t.value=t.value.filter(function(e){return e.id!==r})));var r}},s[14]||(s[14]=[(0,r.Lk)("i",{class:"cil-trash"},null,-1)]),8,C)])])}),128))])])])]),(0,r.Lk)("div",S,[(0,r.Lk)("div",O,[s[21]||(s[21]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"card-title mb-0"},"Webhook-Statistiken")],-1)),(0,r.Lk)("div",x,[(0,r.Lk)("div",E,[s[16]||(s[16]=(0,r.Lk)("span",null,"Aktiv:",-1)),(0,r.Lk)("span",A,(0,r.v_)(u.value),1)]),(0,r.Lk)("div",j,[s[17]||(s[17]=(0,r.Lk)("span",null,"Inaktiv:",-1)),(0,r.Lk)("span",_,(0,r.v_)(te.value),1)]),(0,r.Lk)("div",B,[s[18]||(s[18]=(0,r.Lk)("span",null,"Fehlerhaft:",-1)),(0,r.Lk)("span",W,(0,r.v_)(ne.value),1)]),s[20]||(s[20]=(0,r.Lk)("hr",null,null,-1)),(0,r.Lk)("div",F,[s[19]||(s[19]=(0,r.Lk)("span",null,"Gesamt:",-1)),(0,r.Lk)("span",P,(0,r.v_)(t.value.length),1)])])]),(0,r.Lk)("div",I,[s[23]||(s[23]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"card-title mb-0"},"Verfügbare Events")],-1)),(0,r.Lk)("div",U,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(n,function(e){return(0,r.Lk)("div",{key:e.key,class:"mb-2"},[(0,r.Lk)("strong",null,(0,r.v_)(e.name),1),s[22]||(s[22]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("small",X,(0,r.v_)(e.description),1)])}),64))])])])]),(0,r.Q3)(" Create/Edit Modal "),(0,r.Lk)("div",{class:(0,r.C4)(["modal fade",{show:l.value}]),style:(0,r.Tr)({display:l.value?"block":"none"}),tabindex:"-1"},[(0,r.Lk)("div",K,[(0,r.Lk)("div",z,[(0,r.Lk)("div",V,[(0,r.Lk)("h5",R,(0,r.v_)(a.value?"Webhook bearbeiten":"Neuer Webhook"),1),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:ae})]),(0,r.Lk)("div",M,[(0,r.Lk)("form",{onSubmit:(0,r.D$)(se,["prevent"])},[(0,r.Lk)("div",D,[s[24]||(s[24]=(0,r.Lk)("label",{class:"form-label"},"Name",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=function(e){return i.name=e}),required:""},null,512),[[r.Jo,i.name]])]),(0,r.Lk)("div",N,[s[25]||(s[25]=(0,r.Lk)("label",{class:"form-label"},"Beschreibung",-1)),(0,r.bo)((0,r.Lk)("textarea",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=function(e){return i.description=e}),rows:"2"},null,512),[[r.Jo,i.description]])]),(0,r.Lk)("div",T,[s[26]||(s[26]=(0,r.Lk)("label",{class:"form-label"},"URL",-1)),(0,r.bo)((0,r.Lk)("input",{type:"url",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=function(e){return i.url=e}),required:""},null,512),[[r.Jo,i.url]])]),(0,r.Lk)("div",J,[s[27]||(s[27]=(0,r.Lk)("label",{class:"form-label"},"Events",-1)),(0,r.Lk)("div",Q,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(n,function(e){return(0,r.Lk)("div",{key:e.key,class:"col-md-6"},[(0,r.Lk)("div",H,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.key,"onUpdate:modelValue":s[4]||(s[4]=function(e){return i.events=e}),id:"event-"+e.key},null,8,q),[[r.lH,i.events]]),(0,r.Lk)("label",{class:"form-check-label",for:"event-"+e.key},(0,r.v_)(e.name),9,$)])])}),64))])]),(0,r.Lk)("div",G,[s[28]||(s[28]=(0,r.Lk)("label",{class:"form-label"},"Secret Key (optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=function(e){return i.secret=e}),placeholder:"Für HMAC-Signatur"},null,512),[[r.Jo,i.secret]])]),(0,r.Lk)("div",Y,[(0,r.Lk)("div",Z,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=function(e){return i.retryOnFailure=e})},null,512),[[r.lH,i.retryOnFailure]]),s[29]||(s[29]=(0,r.Lk)("label",{class:"form-check-label"}," Bei Fehlern wiederholen ",-1))])])],32)]),(0,r.Lk)("div",{class:"modal-footer"},[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:ae},"Abbrechen"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:se},"Speichern")])])])],6),l.value?((0,r.uX)(),(0,r.CE)("div",ee)):(0,r.Q3)("v-if",!0)])}}};var ne=n(5072),re=n.n(ne),le=n(7825),ae=n.n(le),se=n(7659),ie=n.n(se),oe=n(5056),ue=n.n(oe),ce=n(540),de=n.n(ce),be=n(1113),ke=n.n(be),me=n(2020),ve={};ve.styleTagTransform=ke(),ve.setAttributes=ue(),ve.insert=ie().bind(null,"head"),ve.domAPI=ae(),ve.insertStyleElement=de(),re()(me.A,ve),me.A&&me.A.locals&&me.A.locals;const fe=(0,n(6262).A)(te,[["__scopeId","data-v-63bba5f3"]])}}]);